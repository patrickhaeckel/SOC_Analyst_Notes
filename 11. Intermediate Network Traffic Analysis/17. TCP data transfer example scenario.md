---
title: 17. TCP data transfer example scenario
updated: 2025-09-15 04:16:13Z
created: 2025-09-15 04:13:54Z
---

## Example Scenario

- **Application sends:** 10 KB (10,240 bytes).
    
- **Sender TCP buffer size:** 8 KB (8,192 bytes).
    
- **Receiver TCP buffer size:** 16 KB (16,384 bytes).
    
- **Receiver’s advertised TCP window:** 12 KB (12,288 bytes).
    
- **MTU (Ethernet):** 1500 bytes.
    

* * *

## Step 1: Data enters the Sender Buffer

The application gives 10 KB to the TCP layer.

- Sender buffer (8 KB) fills completely.
    
- Remaining 2 KB is held until some buffer space is freed (via ACKs).
    

* * *

## Step 2: TCP Segmentation by MTU

TCP must fit data into **MTU-sized segments** (1500 bytes).

- Out of 8 KB in the buffer, TCP chops into 1500-byte chunks.
    
- 8192 ÷ 1500 ≈ 5 full segments (7500 bytes) + 1 partial segment (692 bytes).
    

So TCP prepares:

- **5 full segments** = 1500 bytes each.
    
- **1 small segment** = 692 bytes.
    

* * *

## Step 3: Window Enforcement

Receiver advertises a **12 KB window**, meaning:

- Sender can transmit **up to 12 KB unacknowledged**.
    
- Right now, sender has only 8 KB buffered → it can send all of it.
    

* * *

## Step 4: Transmission

- Sender transmits all 6 segments (total 8 KB).
    
- Receiver accepts and places them into its **receive buffer** (16 KB capacity).
    
- At this point, **4 KB of space remains in the advertised window** (12 KB – 8 KB).
    

* * *

## Step 5: Buffer & ACK cycle

- Receiver processes some data and ACKs the 8 KB.
    
- ACK frees sender’s buffer.
    
- Sender now pulls the **remaining 2 KB** from the app and sends it:
    
    - 1500 bytes (full MTU).
        
    - 500 bytes (partial segment).
        

* * *

**The window is always ≤ buffer size**.  
The **window is basically the “available free space” in the buffer** that the receiver is willing to accept right now.  
It shrinks as the buffer fills, grows as the application consumes data.

* * *

## Step 6: Role of PSH

- If **PSH flag = OFF**:
    
    - Receiver may hold the last 500-byte segment in its buffer, waiting for more data to arrive before passing it up to the application.
- If **PSH flag = ON**:
    
    - Receiver immediately pushes that 500 bytes to the application, even though it’s “small” and doesn’t fill an MTU or buffer.

* * *

## Summary of Relationships

- **Buffer** = staging area (sender: before transmit, receiver: before app delivery).
    
- **MTU** = packet size limit, controls how data chunks are cut.
    
- **Window** = flow control, limits how much buffered data can be in flight.
    
- **PSH** = tells TCP to break the “wait for buffer fill” habit and deliver data immediately.
    

&nbsp;